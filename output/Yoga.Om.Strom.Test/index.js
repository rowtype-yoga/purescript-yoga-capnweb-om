// Generated by purs version 0.15.15
import * as Control_Alt from "../Control.Alt/index.js";
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Apply from "../Control.Apply/index.js";
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_EuclideanRing from "../Data.EuclideanRing/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Ord from "../Data.Ord/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Data_Semiring from "../Data.Semiring/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Time_Duration from "../Data.Time.Duration/index.js";
import * as Data_Tuple from "../Data.Tuple/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Effect_Class from "../Effect.Class/index.js";
import * as Effect_Exception from "../Effect.Exception/index.js";
import * as Effect_Ref from "../Effect.Ref/index.js";
import * as Test_Spec from "../Test.Spec/index.js";
import * as Test_Spec_Assertions from "../Test.Spec.Assertions/index.js";
import * as Yoga_Om from "../Yoga.Om/index.js";
import * as Yoga_Om_Strom from "../Yoga.Om.Strom/index.js";
var runOm1 = /* #__PURE__ */ Yoga_Om.runOm()()();
var liftEffect = /* #__PURE__ */ Effect_Class.liftEffect(Effect_Aff.monadEffectAff);
var describe = /* #__PURE__ */ Test_Spec.describe(Data_Identity.monadIdentity);
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit);
var discard1 = /* #__PURE__ */ discard(/* #__PURE__ */ Test_Spec.bindSpecT(Data_Identity.bindIdentity));
var it = /* #__PURE__ */ Test_Spec.it(Data_Identity.monadIdentity)(Test_Spec.exampleMUnit);
var bind = /* #__PURE__ */ Control_Bind.bind(Effect_Aff.bindAff);
var shouldEqual = /* #__PURE__ */ Test_Spec_Assertions.shouldEqual(Effect_Aff.monadThrowAff);
var showArray = /* #__PURE__ */ Data_Show.showArray(Data_Show.showInt);
var eqArray = /* #__PURE__ */ Data_Eq.eqArray(Data_Eq.eqInt);
var shouldEqual1 = /* #__PURE__ */ shouldEqual(showArray)(eqArray);
var add = /* #__PURE__ */ Data_Semiring.add(Data_Semiring.semiringInt);
var pure = /* #__PURE__ */ Control_Applicative.pure(Yoga_Om.applicativeOm);
var shouldEqual2 = /* #__PURE__ */ shouldEqual(Data_Show.showUnit)(Data_Eq.eqUnit);
var shouldEqual3 = /* #__PURE__ */ shouldEqual(Data_Show.showInt)(Data_Eq.eqInt);
var liftEffect1 = /* #__PURE__ */ Effect_Class.liftEffect(Yoga_Om.monadEffectOm);
var bind1 = /* #__PURE__ */ Control_Bind.bind(Yoga_Om_Strom.bindStrom1);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var shouldEqual4 = /* #__PURE__ */ shouldEqual(/* #__PURE__ */ Data_Show.showArray(Data_Show.showString))(/* #__PURE__ */ Data_Eq.eqArray(Data_Eq.eqString));
var discard2 = /* #__PURE__ */ discard(Effect_Aff.bindAff);
var mod = /* #__PURE__ */ Data_EuclideanRing.mod(Data_EuclideanRing.euclideanRingInt);
var changesStrom = /* #__PURE__ */ Yoga_Om_Strom.changesStrom(Data_Eq.eqInt);
var shouldEqual5 = /* #__PURE__ */ shouldEqual(/* #__PURE__ */ Data_Show.showArray(/* #__PURE__ */ Data_Tuple.showTuple(Data_Show.showInt)(Data_Show.showString)))(/* #__PURE__ */ Data_Eq.eqArray(/* #__PURE__ */ Data_Tuple.eqTuple(Data_Eq.eqInt)(Data_Eq.eqString)));
var append1 = /* #__PURE__ */ Data_Semigroup.append(Yoga_Om_Strom.semigroupStrom);
var sort = /* #__PURE__ */ Data_Array.sort(Data_Ord.ordInt);
var applySecond = /* #__PURE__ */ Control_Apply.applySecond(Yoga_Om.applyOm);
var delay = /* #__PURE__ */ Yoga_Om.delay(Yoga_Om.monadAffOm)(Data_Time_Duration.durationMilliseconds);
var shouldEqual6 = /* #__PURE__ */ shouldEqual(Data_Show.showBoolean)(Data_Eq.eqBoolean);
var shouldEqual7 = /* #__PURE__ */ shouldEqual(/* #__PURE__ */ Data_Show.showArray(showArray))(/* #__PURE__ */ Data_Eq.eqArray(eqArray));
var shouldEqual8 = /* #__PURE__ */ shouldEqual(/* #__PURE__ */ Data_Maybe.showMaybe(Data_Show.showInt))(/* #__PURE__ */ Data_Maybe.eqMaybe(Data_Eq.eqInt));
var alt = /* #__PURE__ */ Control_Alt.alt(Yoga_Om_Strom.altStrom);
var shouldEqual9 = /* #__PURE__ */ shouldEqual(/* #__PURE__ */ Data_Show.showArray(/* #__PURE__ */ Data_Tuple.showTuple(Data_Show.showString)(Data_Show.showInt)))(/* #__PURE__ */ Data_Eq.eqArray(/* #__PURE__ */ Data_Tuple.eqTuple(Data_Eq.eqString)(Data_Eq.eqInt)));
var bind2 = /* #__PURE__ */ Control_Bind.bind(Data_Maybe.bindMaybe);
var runOm = function (om) {
    return runOm1({})({
        exception: function (err) {
            return liftEffect(Effect_Exception.throwException(err));
        }
    })(om);
};
var parseNumber = function (v) {
    if (v === "1") {
        return new Data_Maybe.Just(1);
    };
    if (v === "2") {
        return new Data_Maybe.Just(2);
    };
    if (v === "3") {
        return new Data_Maybe.Just(3);
    };
    if (v === "4") {
        return new Data_Maybe.Just(4);
    };
    if (v === "5") {
        return new Data_Maybe.Just(5);
    };
    return Data_Maybe.Nothing.value;
};
var spec = /* #__PURE__ */ describe("Strom")(/* #__PURE__ */ discard1(/* #__PURE__ */ describe("Construction")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("empty produces no elements")(/* #__PURE__ */ bind(/* #__PURE__ */ runOm(/* #__PURE__ */ Yoga_Om_Strom.runCollect(Yoga_Om_Strom.empty)))(function (result) {
    return shouldEqual1(result)([  ]);
})))(function () {
    return discard1(it("succeed produces single element")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.succeed(42))))(function (result) {
        return shouldEqual1(result)([ 42 ]);
    })))(function () {
        return discard1(it("fromArray produces all elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.fromArray([ 1, 2, 3, 4, 5 ]))))(function (result) {
            return shouldEqual1(result)([ 1, 2, 3, 4, 5 ]);
        })))(function () {
            return discard1(it("fromArray handles empty array")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.fromArray([  ]))))(function (result) {
                return shouldEqual1(result)([  ]);
            })))(function () {
                return discard1(it("range produces correct sequence")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.rangeStrom(1)(6))))(function (result) {
                    return shouldEqual1(result)([ 1, 2, 3, 4, 5 ]);
                })))(function () {
                    return discard1(it("range with start >= end produces empty")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.rangeStrom(5)(5))))(function (result) {
                        return shouldEqual1(result)([  ]);
                    })))(function () {
                        return discard1(it("iterate produces sequence")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(5)(Yoga_Om_Strom.iterateStrom(function (v) {
                            return v + 1 | 0;
                        })(0)))))(function (result) {
                            return shouldEqual1(result)([ 0, 1, 2, 3, 4 ]);
                        })))(function () {
                            return discard1(it("iterateInfinite works for large streams (15k elements)")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.dropStrom(14995)(Yoga_Om_Strom.takeStrom(15000)(Yoga_Om_Strom.iterateStromInfinite(function (v) {
                                return v + 1 | 0;
                            })(0))))))(function (result) {
                                return shouldEqual1(result)([ 14995, 14996, 14997, 14998, 14999 ]);
                            })))(function () {
                                return discard1(it("repeat produces repeated values")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(3)(Yoga_Om_Strom.repeatStrom(42)))))(function (result) {
                                    return shouldEqual1(result)([ 42, 42, 42 ]);
                                })))(function () {
                                    return discard1(it("repeatInfinite works for large streams (15k elements)")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.dropStrom(14997)(Yoga_Om_Strom.takeStrom(15000)(Yoga_Om_Strom.repeatStromInfinite(99))))))(function (result) {
                                        return shouldEqual1(result)([ 99, 99, 99 ]);
                                    })))(function () {
                                        return discard1(it("unfold produces Fibonacci sequence")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.unfoldStrom(function (v) {
                                            var $97 = v.value0 > 100;
                                            if ($97) {
                                                return Data_Maybe.Nothing.value;
                                            };
                                            return new Data_Maybe.Just(new Data_Tuple.Tuple(v.value0, new Data_Tuple.Tuple(v.value1, v.value0 + v.value1 | 0)));
                                        })(new Data_Tuple.Tuple(0, 1)))))(function (result) {
                                            return shouldEqual1(result)([ 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89 ]);
                                        })))(function () {
                                            return it("fromOm produces value from effect")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.fromOm(pure(42)))))(function (result) {
                                                return shouldEqual1(result)([ 42 ]);
                                            }));
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
})))(function () {
    return discard1(describe("Running/Consuming")(discard1(it("runCollect collects all elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.rangeStrom(1)(6))))(function (result) {
        return shouldEqual1(result)([ 1, 2, 3, 4, 5 ]);
    })))(function () {
        return discard1(it("runDrain executes but returns unit")(bind(runOm(Yoga_Om_Strom.runDrain(Yoga_Om_Strom.rangeStrom(1)(100))))(function (result) {
            return shouldEqual2(result)(Data_Unit.unit);
        })))(function () {
            return discard1(it("runFold reduces stream")(bind(runOm(Yoga_Om_Strom.runFold(0)(add)(Yoga_Om_Strom.rangeStrom(1)(6))))(function (result) {
                return shouldEqual3(result)(15);
            })))(function () {
                return it("traverse_ executes effects")(bind(liftEffect(Effect_Ref["new"](0)))(function (countRef) {
                    return bind(runOm(Yoga_Om_Strom.traverseStrom_(function (v) {
                        return liftEffect1(Effect_Ref.modify_(function (v1) {
                            return v1 + 1 | 0;
                        })(countRef));
                    })(Yoga_Om_Strom.rangeStrom(1)(6))))(function () {
                        return bind(liftEffect(Effect_Ref.read(countRef)))(function (count) {
                            return shouldEqual3(count)(5);
                        });
                    });
                }));
            });
        });
    })))(function () {
        return discard1(describe("Transformations")(discard1(it("map transforms elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mapStrom(function (v) {
            return v * 2 | 0;
        })(Yoga_Om_Strom.rangeStrom(1)(6)))))(function (result) {
            return shouldEqual1(result)([ 2, 4, 6, 8, 10 ]);
        })))(function () {
            return discard1(it("mapM with effects")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mapMStrom(function (n) {
                return pure(n * 2 | 0);
            })(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                return shouldEqual1(result)([ 2, 4, 6 ]);
            })))(function () {
                return discard1(it("bind (>>=) flattens nested streams")(bind(runOm(Yoga_Om_Strom.runCollect(bind1(Yoga_Om_Strom.fromArray([ 1, 2, 3 ]))(function (n) {
                    return Yoga_Om_Strom.fromArray([ n, n * 10 | 0 ]);
                }))))(function (result) {
                    return shouldEqual1(result)([ 1, 10, 2, 20, 3, 30 ]);
                })))(function () {
                    return discard1(it("scan produces running totals")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.scanStrom(add)(0)(Yoga_Om_Strom.fromArray([ 1, 2, 3, 4, 5 ])))))(function (result) {
                        return shouldEqual1(result)([ 1, 3, 6, 10, 15 ]);
                    })))(function () {
                        return discard1(it("mapAccum with state")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mapAccumStrom(function (i) {
                            return function (x) {
                                return new Data_Tuple.Tuple(i + 1 | 0, show(i) + x);
                            };
                        })(1)(Yoga_Om_Strom.fromArray([ "a", "b", "c" ])))))(function (result) {
                            return shouldEqual4(result)([ "1a", "2b", "3c" ]);
                        })))(function () {
                            return discard1(it("tap observes without modifying")(bind(liftEffect(Effect_Ref["new"](0)))(function (_sideEffectRef) {
                                return bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.tapStrom(function (n) {
                                    return Data_Unit.unit;
                                })(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                    return shouldEqual1(result)([ 1, 2, 3 ]);
                                });
                            })))(function () {
                                return it("tapM with effects")(bind(liftEffect(Effect_Ref["new"](0)))(function (countRef) {
                                    return bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.tapMStrom(function (v) {
                                        return liftEffect1(Effect_Ref.modify_(function (v1) {
                                            return v1 + 1 | 0;
                                        })(countRef));
                                    })(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                        return bind(liftEffect(Effect_Ref.read(countRef)))(function (count) {
                                            return discard2(shouldEqual3(count)(3))(function () {
                                                return shouldEqual1(result)([ 1, 2, 3 ]);
                                            });
                                        });
                                    });
                                }));
                            });
                        });
                    });
                });
            });
        })))(function () {
            return discard1(describe("Selection")(discard1(it("take limits elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(5)(Yoga_Om_Strom.rangeStrom(1)(100)))))(function (result) {
                return shouldEqual1(result)([ 1, 2, 3, 4, 5 ]);
            })))(function () {
                return discard1(it("take with 0 produces empty")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(0)(Yoga_Om_Strom.rangeStrom(1)(100)))))(function (result) {
                    return shouldEqual1(result)([  ]);
                })))(function () {
                    return discard1(it("takeWhile stops at condition")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeWhileStrom(function (v) {
                        return v < 5;
                    })(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                        return shouldEqual1(result)([ 1, 2, 3, 4 ]);
                    })))(function () {
                        return discard1(it("takeUntil includes matching element")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeUntilStrom(function (v) {
                            return v === 5;
                        })(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                            return shouldEqual1(result)([ 1, 2, 3, 4, 5 ]);
                        })))(function () {
                            return discard1(it("drop skips elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.dropStrom(5)(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                                return shouldEqual1(result)([ 6, 7, 8, 9 ]);
                            })))(function () {
                                return discard1(it("dropWhile skips until condition")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.dropWhileStrom(function (v) {
                                    return v < 5;
                                })(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                                    return shouldEqual1(result)([ 5, 6, 7, 8, 9 ]);
                                })))(function () {
                                    return discard1(it("filter keeps matching elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.filterStrom(function (n) {
                                        return mod(n)(2) === 0;
                                    })(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                                        return shouldEqual1(result)([ 2, 4, 6, 8 ]);
                                    })))(function () {
                                        return discard1(it("filterM with effects")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.filterMStrom(function (n) {
                                            return pure(mod(n)(2) === 0);
                                        })(Yoga_Om_Strom.rangeStrom(1)(10)))))(function (result) {
                                            return shouldEqual1(result)([ 2, 4, 6, 8 ]);
                                        })))(function () {
                                            return discard1(it("collect filters and maps")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.collectStrom(parseNumber)(Yoga_Om_Strom.fromArray([ "1", "x", "2", "y", "3" ])))))(function (result) {
                                                return shouldEqual1(result)([ 1, 2, 3 ]);
                                            })))(function () {
                                                return it("changes removes consecutive duplicates")(bind(runOm(Yoga_Om_Strom.runCollect(changesStrom(Yoga_Om_Strom.fromArray([ 1, 1, 2, 2, 2, 3, 3, 1, 1 ])))))(function (result) {
                                                    return shouldEqual1(result)([ 1, 2, 3, 1 ]);
                                                }));
                                            });
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            })))(function () {
                return discard1(describe("Combining")(discard1(it("append concatenates streams")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.appendStrom(Yoga_Om_Strom.fromArray([ 4, 5, 6 ]))(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                    return shouldEqual1(result)([ 1, 2, 3, 4, 5, 6 ]);
                })))(function () {
                    return discard1(it("concat multiple streams")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.concatStrom([ Yoga_Om_Strom.fromArray([ 1, 2 ]), Yoga_Om_Strom.fromArray([ 3, 4 ]), Yoga_Om_Strom.fromArray([ 5, 6 ]) ]))))(function (result) {
                        return shouldEqual1(result)([ 1, 2, 3, 4, 5, 6 ]);
                    })))(function () {
                        return discard1(it("zip pairs elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.zipStrom(Yoga_Om_Strom.rangeStrom(1)(4))(Yoga_Om_Strom.fromArray([ "a", "b", "c" ])))))(function (result) {
                            return shouldEqual5(result)([ new Data_Tuple.Tuple(1, "a"), new Data_Tuple.Tuple(2, "b"), new Data_Tuple.Tuple(3, "c") ]);
                        })))(function () {
                            return discard1(it("zip stops at shortest stream")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.zipStrom(Yoga_Om_Strom.rangeStrom(1)(10))(Yoga_Om_Strom.fromArray([ "a", "b" ])))))(function (result) {
                                return shouldEqual5(result)([ new Data_Tuple.Tuple(1, "a"), new Data_Tuple.Tuple(2, "b") ]);
                            })))(function () {
                                return discard1(it("zipWith with custom function")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.zipWithStrom(add)(Yoga_Om_Strom.rangeStrom(1)(4))(Yoga_Om_Strom.rangeStrom(10)(13)))))(function (result) {
                                    return shouldEqual1(result)([ 11, 13, 15 ]);
                                })))(function () {
                                    return discard1(it("interleave alternates elements")(bind(runOm(Yoga_Om_Strom.runCollect(append1(Yoga_Om_Strom.fromArray([ 1, 3, 5 ]))(Yoga_Om_Strom.fromArray([ 2, 4, 6 ])))))(function (result) {
                                        return shouldEqual1(result)([ 1, 3, 5, 2, 4, 6 ]);
                                    })))(function () {
                                        return it("race takes first to emit")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.fromOm(pure(2)))))(function (result) {
                                            return shouldEqual1(result)([ 2 ]);
                                        }));
                                    });
                                });
                            });
                        });
                    });
                })))(function () {
                    return discard1(describe("Non-Deterministic Merge")(discard1(it("mergeND merges two streams concurrently")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.fromArray([ 1, 2, 3 ]))(Yoga_Om_Strom.fromArray([ 10, 20, 30 ])))))(function (result) {
                        return shouldEqual1(sort(result))([ 1, 2, 3, 10, 20, 30 ]);
                    })))(function () {
                        return discard1(it("mergeND handles fast and slow streams")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.mapMStrom(function (n) {
                            return applySecond(delay(50.0))(pure(n));
                        })(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))(Yoga_Om_Strom.mapMStrom(function (n) {
                            return applySecond(delay(5.0))(pure(n));
                        })(Yoga_Om_Strom.fromArray([ 10, 20, 30 ]))))))(function (result) {
                            return discard2(shouldEqual1(sort(result))([ 1, 2, 3, 10, 20, 30 ]))(function () {
                                var fastElements = Data_Array.filter(function (n) {
                                    return n >= 10;
                                })(result);
                                return shouldEqual3(Data_Array.length(fastElements))(3);
                            });
                        })))(function () {
                            return discard1(it("mergeND handles empty streams")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.empty)(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                return shouldEqual1(result)([ 1, 2, 3 ]);
                            })))(function () {
                                return discard1(it("mergeND handles both streams empty")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.empty)(Yoga_Om_Strom.empty))))(function (result) {
                                    return shouldEqual1(result)([  ]);
                                })))(function () {
                                    return discard1(it("mergeND handles one stream finishing first")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.fromArray([ 1, 2 ]))(Yoga_Om_Strom.fromArray([ 10, 20, 30, 40 ])))))(function (result) {
                                        return shouldEqual1(sort(result))([ 1, 2, 10, 20, 30, 40 ]);
                                    })))(function () {
                                        return discard1(it("mergeND with takeStrom limits output")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(10)(Yoga_Om_Strom.mergeND(Yoga_Om_Strom.repeatStromInfinite(1))(Yoga_Om_Strom.repeatStromInfinite(2))))))(function (result) {
                                            return discard2(shouldEqual3(Data_Array.length(result))(10))(function () {
                                                var allValid = Data_Array.all(function (n) {
                                                    return n === 1 || n === 2;
                                                })(result);
                                                return shouldEqual6(allValid)(true);
                                            });
                                        })))(function () {
                                            return discard1(it("mergeAllND merges multiple streams")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeAllND([ Yoga_Om_Strom.fromArray([ 1, 2 ]), Yoga_Om_Strom.fromArray([ 10, 20 ]), Yoga_Om_Strom.fromArray([ 100, 200 ]) ]))))(function (result) {
                                                return shouldEqual1(sort(result))([ 1, 2, 10, 20, 100, 200 ]);
                                            })))(function () {
                                                return it("mergeAllND handles empty array")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mergeAllND([  ]))))(function (result) {
                                                    return shouldEqual1(result)([  ]);
                                                }));
                                            });
                                        });
                                    });
                                });
                            });
                        });
                    })))(function () {
                        return discard1(describe("Grouping")(discard1(it("grouped creates fixed-size chunks")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(3)(Yoga_Om_Strom.rangeStrom(1)(11)))))(function (result) {
                            return shouldEqual7(result)([ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7, 8, 9 ], [ 10 ] ]);
                        })))(function () {
                            return discard1(it("grouped with partial last chunk")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(3)(Yoga_Om_Strom.rangeStrom(1)(8)))))(function (result) {
                                return shouldEqual7(result)([ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7 ] ]);
                            })))(function () {
                                return discard1(it("chunked is alias for grouped")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.chunkedStrom(2)(Yoga_Om_Strom.rangeStrom(1)(6)))))(function (result) {
                                    return shouldEqual7(result)([ [ 1, 2 ], [ 3, 4 ], [ 5 ] ]);
                                })))(function () {
                                    return it("partition splits by predicate")((function () {
                                        var stream = Yoga_Om_Strom.rangeStrom(1)(11);
                                        return bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.filterStrom(function (n) {
                                            return mod(n)(2) === 0;
                                        })(stream))))(function (evensResult) {
                                            return bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.filterStrom(function (n) {
                                                return mod(n)(2) !== 0;
                                            })(stream))))(function (oddsResult) {
                                                return discard2(shouldEqual1(evensResult)([ 2, 4, 6, 8, 10 ]))(function () {
                                                    return shouldEqual1(oddsResult)([ 1, 3, 5, 7, 9 ]);
                                                });
                                            });
                                        });
                                    })());
                                });
                            });
                        })))(function () {
                            return discard1(describe("Timing Operations")(discard1(it("debounce adds delay between elements")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.debounce(10.0)(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                return shouldEqual1(result)([ 1, 2, 3 ]);
                            })))(function () {
                                return it("throttle limits emission rate")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.throttle(5.0)(Yoga_Om_Strom.fromArray([ 1, 2, 3, 4, 5 ])))))(function (result) {
                                    return discard2(shouldEqual3(Data_Array.length(result))(1))(function () {
                                        return shouldEqual8(Data_Array.head(result))(new Data_Maybe.Just(1));
                                    });
                                }));
                            })))(function () {
                                return discard1(describe("Error Handling")(discard1(it("catchAll recovers from errors")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mapMStrom(function (n) {
                                    var $100 = n === 2;
                                    if ($100) {
                                        return pure(999);
                                    };
                                    return pure(n * 2 | 0);
                                })(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                    return shouldEqual1(result)([ 2, 999, 6 ]);
                                })))(function () {
                                    return it("orElse provides alternative")((function () {
                                        var successStream = Yoga_Om_Strom.fromArray([ 1, 2, 3 ]);
                                        return bind(runOm(Yoga_Om_Strom.runCollect(alt(Yoga_Om_Strom.empty)(successStream))))(function (result) {
                                            return shouldEqual1(result)([ 1, 2, 3 ]);
                                        });
                                    })());
                                })))(function () {
                                    return discard1(describe("Complex Scenarios")(discard1(it("pipeline: filter, map, group")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(3)(Yoga_Om_Strom.mapStrom(function (v) {
                                        return v * 2 | 0;
                                    })(Yoga_Om_Strom.filterStrom(function (n) {
                                        return mod(n)(2) === 0;
                                    })(Yoga_Om_Strom.rangeStrom(1)(21)))))))(function (result) {
                                        return shouldEqual7(result)([ [ 4, 8, 12 ], [ 16, 20, 24 ], [ 28, 32, 36 ], [ 40 ] ]);
                                    })))(function () {
                                        return discard1(it("nested bind (>>=) with filtering")(bind(runOm(Yoga_Om_Strom.runCollect(bind1(Yoga_Om_Strom.fromArray([ 1, 2, 3 ]))(function (n) {
                                            return Yoga_Om_Strom.filterStrom(function (x) {
                                                return mod(x)(2) === 0;
                                            })(Yoga_Om_Strom.rangeStrom(n * 10 | 0)((n * 10 | 0) + 3 | 0));
                                        }))))(function (result) {
                                            return shouldEqual1(result)([ 10, 12, 20, 22, 30, 32 ]);
                                        })))(function () {
                                            return discard1(it("scan with filtering and mapping")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.mapStrom(function (v) {
                                                return v * 10 | 0;
                                            })(Yoga_Om_Strom.scanStrom(add)(0)(Yoga_Om_Strom.filterStrom(function (v) {
                                                return v > 0;
                                            })(Yoga_Om_Strom.fromArray([ 1, -2 | 0, 3, -4 | 0, 5 ])))))))(function (result) {
                                                return shouldEqual1(result)([ 10, 40, 90 ]);
                                            })))(function () {
                                                return discard1(it("zip with scan")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.zipStrom(Yoga_Om_Strom.fromArray([ "a", "b", "c", "d" ]))(Yoga_Om_Strom.takeStrom(4)(Yoga_Om_Strom.scanStrom(add)(0)(Yoga_Om_Strom.iterateStrom(function (v) {
                                                    return v + 1 | 0;
                                                })(1)))))))(function (result) {
                                                    return shouldEqual9(result)([ new Data_Tuple.Tuple("a", 1), new Data_Tuple.Tuple("b", 3), new Data_Tuple.Tuple("c", 6), new Data_Tuple.Tuple("d", 10) ]);
                                                })))(function () {
                                                    return it("large stream with take")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(10)(Yoga_Om_Strom.takeStrom(100)(Yoga_Om_Strom.filterStrom(function (n) {
                                                        return mod(n)(3) === 0;
                                                    })(Yoga_Om_Strom.iterateStrom(function (v) {
                                                        return v + 1 | 0;
                                                    })(0)))))))(function (result) {
                                                        return discard2(shouldEqual3(Data_Array.length(result))(10))(function () {
                                                            return shouldEqual8(bind2(Data_Array.head(result))(Data_Array.head))(new Data_Maybe.Just(0));
                                                        });
                                                    }));
                                                });
                                            });
                                        });
                                    })))(function () {
                                        return describe("Edge Cases")(discard1(it("empty stream through pipeline")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(10)(Yoga_Om_Strom.filterStrom(function (v) {
                                            return v > 0;
                                        })(Yoga_Om_Strom.mapStrom(function (v) {
                                            return v * 2 | 0;
                                        })(Yoga_Om_Strom.empty))))))(function (result) {
                                            return shouldEqual7(result)([  ]);
                                        })))(function () {
                                            return discard1(it("single element through complex pipeline")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(10)(Yoga_Om_Strom.filterStrom(function (v) {
                                                return v > 50;
                                            })(Yoga_Om_Strom.mapStrom(function (v) {
                                                return v * 2 | 0;
                                            })(Yoga_Om_Strom.succeed(42)))))))(function (result) {
                                                return shouldEqual1(result)([ 84 ]);
                                            })))(function () {
                                                return discard1(it("take more than available")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.takeStrom(100)(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                                    return shouldEqual1(result)([ 1, 2, 3 ]);
                                                })))(function () {
                                                    return discard1(it("drop more than available")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.dropStrom(100)(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                                        return shouldEqual1(result)([  ]);
                                                    })))(function () {
                                                        return it("grouped with size larger than stream")(bind(runOm(Yoga_Om_Strom.runCollect(Yoga_Om_Strom.groupedStrom(100)(Yoga_Om_Strom.fromArray([ 1, 2, 3 ])))))(function (result) {
                                                            return shouldEqual7(result)([ [ 1, 2, 3 ] ]);
                                                        }));
                                                    });
                                                });
                                            });
                                        }));
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
}));
export {
    runOm,
    spec,
    parseNumber
};
//# sourceMappingURL=index.js.map
